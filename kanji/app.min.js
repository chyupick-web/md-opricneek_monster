!function(){"use strict";angular.module("kanjidayApp",[])}(),function(){"use strict";function kanjiFactory($http){var factory={};factory.loading=!1;var url="/vocab.json";return factory.get=function(){return factory.loading=!0,factory.promise=$http({url:url,method:"GET"}),factory.promise.then(function(response){factory.loading=!1,factory.data=response.data}),factory.promise},factory}angular.module("kanjidayApp").factory("kanjiFactory",kanjiFactory),kanjiFactory.$inject=["$http"]}(),function(){"use strict";function mainController(kanjiFactory,$scope){function setIndex(length){var index=0,firstTimeUse=void 0===lastChangeDate,newDay=todayDate!=lastChangeDate;return firstTimeUse||newDay?(index=Math.floor(Math.random()*length),localStorage.lastChangeDate=(new Date).getDate(),localStorage.lastKanjiIndex=index,index):index=localStorage.lastKanjiIndex}var vm=this;vm.kanjiFactory=kanjiFactory,vm.applyColors=function(){var colorChanged=localStorage.colorChanged;"changed"==colorChanged?(vm.bodyBackground=localStorage.savedHex,vm.wrapperBackground=localStorage.savedFrameColor,vm.border="6px solid "+localStorage.savedFrameColor):(vm.bodyBackground="lightpink",vm.wrapperBackground="white",vm.border="6px solid white")},vm.applyColors();var lastChangeDate=localStorage.lastChangeDate,todayDate=(new Date).getDate(),length=0;kanjiFactory.get().then(function(response){vm.kanjiList=response.data.kanji,length=response.data.kanji.length;var kanjiIndex=setIndex(length);vm.kanji=response.data.kanji[kanjiIndex],1==vm.kanji.character.length?vm.oneCharacter=!0:vm.oneCharacter=!1}),vm.updateColors=function(){vm.applyColors(),$scope.$apply()}}angular.module("kanjidayApp").controller("mainController",mainController),mainController.$inject=["kanjiFactory","$scope"]}(),function(){"use strict";function colorPick(){function link(scope,element,attrs,settingsMenuCtrl){function updateFramingColor(rgb){var weightedL=calculateLightness(rgb),rD=calculateDarkness(rgb.r),gD=calculateDarkness(rgb.g),bD=calculateDarkness(rgb.b),rgbDarker="rgb("+rD+","+gD+","+bD+")",whiteTransp="rgba(255,255,255,0.95)";weightedL>.82?(lightColor=!1,localStorage.savedFrameColor=rgbDarker):(lightColor=!0,localStorage.savedFrameColor=whiteTransp)}function calculateLightness(rgb){var L=.2126*rgb.r+.7152*rgb.g+.0722*rgb.b,weightedL=L/255;return weightedL}function calculateDarkness(e){var darkenPercent=40,D=Math.round(e*(100-darkenPercent)/100);return D}var lightColor;$(".picker").colpick({flat:!0,layout:"hex",submit:0,onChange:function(hsb,hex,rgb,el,bySetColor){localStorage.savedHex="#"+hex,localStorage.colorChanged="changed",updateFramingColor(rgb),settingsMenuCtrl.updateColor()}})}var directive={scope:!0,require:"^settingsMenu",templateUrl:"/app/directives/colorpick.view.html",link:link};return directive}angular.module("kanjidayApp").directive("colorPick",colorPick),colorPick.$inject=[]}(),function(){"use strict";function footerInfo(){function link(scope,element,attrs){var isToggled=!1;scope.toggleFooter=function(){isToggled?(isToggled=!1,$(".mainView").css("margin-bottom","0"),$(".info-icon").css("margin-bottom","0"),$("footer").removeClass("show-footer"),$("footer").empty()):(isToggled=!0,$(".mainView").css("margin-bottom","9rem"),$(".info-icon").css("margin-bottom","9rem"),$("footer").addClass("show-footer"),$("footer").append('<h2>Kanjiday</h2><div><p>Kanjiday replaces your new tab with a a new Kanji card. One new card every day. The selection is of regular/daily life words.</p><p>Thanks for using Kanjiday!</p> <a href="mailto:contact@kanjiday.com">contact@kanjiday.com</a></div><a class="twitter-link" href="https://www.twitter.com/kanjiday_app" target="_blank"><img src="img/twitter.png"></a>'))}}var directive={scope:!0,templateUrl:"/app/directives/footerInfo.view.html",link:link};return directive}angular.module("kanjidayApp").directive("footerInfo",footerInfo),footerInfo.$inject=[]}(),function(){"use strict";function nextKanji(){function link(scope,element,attrs){scope.setNewKanji=function(kanjiList){var newIndex=Math.floor(Math.random()*kanjiList.length);localStorage.lastChangeDate=(new Date).getDate(),localStorage.lastKanjiIndex=newIndex,kanjiList[newIndex].character.length>1?($("#character").addClass("two-characters"),$("#character").removeClass("one-character"),$("#kunyomi").addClass("kunyomi-two-characters"),$("#kunyomi").removeClass("kunyomi-one-character")):($("#character").removeClass("two-characters"),$("#character").addClass("one-character"),$("#kunyomi").removeClass("kunyomi-two-characters"),$("#kunyomi").addClass("kunyomi-one-character")),$("#character").fadeOut(0,function(){$("#character").text(kanjiList[newIndex].character).fadeIn(300)}),$("#kunyomi").fadeOut(0,function(){$("#kunyomi").text(kanjiList[newIndex].kunyomi).fadeIn(300)}),$("#meaning").fadeOut(0,function(){$("#meaning").text(kanjiList[newIndex].meaning).fadeIn(300)})}}var directive={scope:{list:"="},templateUrl:"/app/directives/nextKanji.view.html",link:link};return directive}angular.module("kanjidayApp").directive("nextKanji",nextKanji),nextKanji.$inject=[]}(),function(){"use strict";function onboarding(){function link(scope,element,attrs){localStorage.nextKanjiSeen?scope.nextKanjiSeen=localStorage.nextKanjiSeen:(localStorage.nextKanjiSeen="0",scope.nextKanjiSeen=localStorage.nextKanjiSeen),scope.nextKanjiUnsee=function(){localStorage.nextKanjiSeen="1",scope.nextKanjiSeen=localStorage.nextKanjiSeen}}var directive={scope:{textColor:"=",buttonColor:"="},templateUrl:"/app/directives/onboarding.view.html",link:link};return directive}angular.module("kanjidayApp").directive("onboarding",onboarding),onboarding.$inject=[]}(),function(){"use strict";function settingsMenu(kanjiFactory){function link(scope,element,attrs){function hidePicker(){$("#picker-wrapper").removeClass("show-picker"),$(".picker").css("display","none"),pickerIsToggled=!1}var menuIsToggled=!1;scope.kanjiFactory=kanjiFactory,scope.toggleSettingsMenu=function(){menuIsToggled?($("#settings-menu").css("display","none"),menuIsToggled=!1,hidePicker(),$("#list-wrapper").removeClass("show-list")):($("#settings-menu").css("display","block"),menuIsToggled=!0)};var pickerIsToggled=!1;scope.toggleColorPicker=function(){pickerIsToggled?hidePicker():($(".picker").css("display","flex"),$("#picker-wrapper").addClass("show-picker"),$("#list-wrapper").removeClass("show-list"),pickerIsToggled=!0)};var listIsToggled=!1;scope.toggleList=function(){listIsToggled?($("#list-wrapper").removeClass("show-list"),listIsToggled=!1):($("#list-wrapper").addClass("show-list"),hidePicker(),listIsToggled=!0)}}var directive={link:link,templateUrl:"/app/directives/settingsMenu.view.html",scope:{updateColor:"="},controller:function($scope){var vm=this;vm.updateColor=$scope.updateColor}};return directive}angular.module("kanjidayApp").directive("settingsMenu",settingsMenu),settingsMenu.$inject=["kanjiFactory"]}();